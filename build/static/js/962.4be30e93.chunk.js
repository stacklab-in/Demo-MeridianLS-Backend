"use strict";(self.webpackChunk_tracking_software=self.webpackChunk_tracking_software||[]).push([[962],{94962:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var i=t(6907),a=t(1413),r=t(74165),s=t(15861),l=t(29439),o=t(72791),c=t(57088),u=t(30439),d=t(89164),p=t(4567),h=t(73590),v=t(64554),g=t(61889),x=t(68096),m=t(50168),Z=t(99321),f=t(82626),T=t(27391),D=t(18406),P=t(99615),j=t(52073),k=t(58518),O=t(43513),S=t(71652),b=t(24750),A=t(73936),C=t(97892),U=t.n(C),y=t(83027),w=t.n(y),M=t(80184),I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,height:"auto",p:2};function _(){var e=(0,c.K$)(),n=(0,o.useState)(!1),t=(0,l.Z)(n,2),i=t[0],C=t[1],y=(0,o.useState)([]),w=(0,l.Z)(y,2),_=w[0],E=w[1],W=(0,o.useState)(!1),q=(0,l.Z)(W,2),B=q[0],Y=q[1],z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem(j._.keyUserToken),t=(0,D.sw)(n),e.next=5,P.ZP.post(P.Hv.shipment.list,{},{headers:{Authorization:"Bearer ".concat(t)}});case 5:(i=e.sent)&&(console.log({response:i}),C(!1),E(i.data.data)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log({err:e.t0}),(0,k.yv)("Failed to fetch jobcards!",{variant:"error"}),C(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){C(!0),z()}),[]);var F=[{name:"#",selector:function(e,n){return n+1},sortable:!0,width:"70px"},{name:"Tracking No.",selector:function(e){return e.trackingNo},sortable:!0},{name:"Status",selector:function(e){return e.statuses[e.statuses.length-1].value},sortable:!0,center:"true"},{name:"Created On",selector:function(e){return(0,D.p6)(e.createdAt)},sortable:!0},{name:"Actions",center:"true",width:"400px",cell:function(e){return(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"10px"},children:[(0,M.jsx)(u.Z,{color:"info",variant:"outlined",onClick:function(){return ne(e)},children:"Update Status"}),(0,M.jsx)(u.Z,{color:"info",variant:"outlined",onClick:function(){ne(e),Y(!0),J((function(e){return(0,a.Z)((0,a.Z)({},e),{},{location:"",dateTime:null,msg:"",exceptionalMsg:""})}))},children:"Update Current Status"})]})}}],H=(0,o.useState)(!1),L=(0,l.Z)(H,2),N=L[0],K=L[1],R=(0,o.useState)({id:"",value:"",location:"",dateTime:null,msg:"",exceptionalMsg:""}),$=(0,l.Z)(R,2),G=$[0],J=$[1],Q=(0,o.useState)({preShipmentDoc:!1,pickedUp:!1,inTransitOrigin:!1,clearanceAtOriginPort:!1,inTransitOverseas:!1,clearanceAtDestinationPort:!1,inTransitDestination:!1,delivered:!1}),V=(0,l.Z)(Q,2),X=V[0],ee=V[1],ne=function(e){K(!0);var n=e.statuses[e.statuses.length-1];"PreShipmentDoc"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!1,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"PickedUp"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!1,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"InTransitOrigin"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!1,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"ClearanceatOriginPort"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!1,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"InTransitOverseas"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!1,inTransitDestination:!0,delivered:!0})})):"ClearanceatDestinationPort"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!1,delivered:!0})})):"InTransitDestination"===n.value?ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!1})})):"Delivered"===n.value&&ee((function(e){return(0,a.Z)((0,a.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})),J({value:null!==n&&void 0!==n&&n.value?n.value:"",location:null!==n&&void 0!==n&&n.location?n.location:"",dateTime:null!==n&&void 0!==n&&n.dateTime?U()(n.dateTime):null,msg:null!==n&&void 0!==n&&n.msg?n.msg:"",exceptionalMsg:null!==n&&void 0!==n&&n.exceptionalMsg?n.exceptionalMsg:"",id:e._id})};console.log({trackingDetails:G});var te=function(){K(!1)};return(0,M.jsxs)(d.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,M.jsx)(p.Z,{variant:"h4",children:" Shipment Tracking "}),(0,M.jsx)("div",{style:{marginTop:"20px"},children:(0,M.jsx)(O.ZP,{columns:F,data:_,pagination:!0,progressPending:i})}),(0,M.jsx)(h.Z,{open:N,children:(0,M.jsx)(v.Z,{sx:I,children:(0,M.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,M.jsx)(g.ZP,{item:!0,xs:12,children:(0,M.jsx)(p.Z,{variant:"h5",gutterBottom:!0,children:B?"Update Current Tracking Details":"Update Tracking Details"})}),(0,M.jsx)(g.ZP,{item:!0,xs:6,children:(0,M.jsxs)(x.Z,{fullWidth:!0,required:!0,children:[(0,M.jsx)(m.Z,{id:"shipment-status-select",children:"Select Status"}),(0,M.jsxs)(Z.Z,{disabled:B,labelId:"shipment-status-select",id:"demo-simple-select",value:G.value,label:"Select Status",onChange:function(e){J((function(n){return(0,a.Z)((0,a.Z)({},n),{},{value:e.target.value})}))},children:[(0,M.jsx)(f.Z,{disabled:X.preShipmentDoc,value:"PreShipmentDoc",children:"Pre Shipment Doc"}),(0,M.jsx)(f.Z,{disabled:X.pickedUp,value:"PickedUp",children:"Picked Up"}),(0,M.jsx)(f.Z,{disabled:X.inTransitOrigin,value:"InTransitOrigin",children:"In Transit to Origin"}),(0,M.jsx)(f.Z,{disabled:X.clearanceAtOriginPort,value:"ClearanceatOriginPort",children:"Clearance at Origin Port"}),(0,M.jsx)(f.Z,{disabled:X.inTransitOverseas,value:"InTransitOverseas",children:"In Transit to Overseas"}),(0,M.jsx)(f.Z,{disabled:X.clearanceAtDestinationPort,value:"ClearanceatDestinationPort",children:"Clearance at Destination Port"}),(0,M.jsx)(f.Z,{disabled:X.inTransitDestination,value:"InTransitDestination",children:"In Transit Destination"}),(0,M.jsx)(f.Z,{disabled:X.delivered,value:"Delivered",children:"Delivered"})]})]})}),(0,M.jsx)(g.ZP,{item:!0,xs:6,children:(0,M.jsx)(S._,{dateAdapter:b.y,children:(0,M.jsx)(A.x,{label:"Date and Time",value:G.dateTime,onChange:function(e){console.log(e),J((0,a.Z)((0,a.Z)({},G),{},{dateTime:e}))},format:"DD/MM/YYYY hh:mm A",slotProps:{textField:{fullWidth:!0,required:!0}}})})}),(0,M.jsx)(g.ZP,{item:!0,xs:12,children:(0,M.jsx)(T.Z,{multiline:!0,rows:3,label:"Location",placeholder:"Enter Location",value:G.location,onChange:function(e){return J((0,a.Z)((0,a.Z)({},G),{},{location:e.target.value}))},fullWidth:!0,required:!0})}),(0,M.jsx)(g.ZP,{item:!0,xs:6,children:(0,M.jsx)(T.Z,{multiline:!0,rows:2,label:"Message",placeholder:"Enter Message",value:G.msg,onChange:function(e){return J((0,a.Z)((0,a.Z)({},G),{},{msg:e.target.value}))},fullWidth:!0,required:!0})}),(0,M.jsx)(g.ZP,{item:!0,xs:6,children:(0,M.jsx)(T.Z,{multiline:!0,rows:2,label:"Exceptional Message",placeholder:"Enter Exceptional Message",value:G.exceptionalMsg,onChange:function(e){return J((0,a.Z)((0,a.Z)({},G),{},{exceptionalMsg:e.target.value}))},fullWidth:!0})}),(0,M.jsxs)(g.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,M.jsx)(u.Z,{onClick:B?function(){var e=localStorage.getItem(j._.keyUserToken),n=(0,D.sw)(e);P.ZP.post(P.Hv.shipment.updateCurrentStatus,G,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){console.log(e),(0,k.yv)("Current Shipment updated successfully!",{variant:"success"}),z(),te(),Y(!1),J({value:"",location:"",dateTime:null,msg:"",exceptionalMsg:"",id:""})})).catch((function(e){(0,k.yv)(e.error||e.msg,{variant:"error"})}))}:function(){console.log({trackingDetails:G});var e=localStorage.getItem(j._.keyUserToken),n=(0,D.sw)(e);P.ZP.post(P.Hv.shipment.update,G,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){(0,k.yv)("Shipment updated successfully!",{variant:"success"}),z(),te(),J({value:"",location:"",dateTime:null,msg:"",exceptionalMsg:"",id:""})})).catch((function(e){(0,k.yv)(e.error||e.msg,{variant:"error"})}))},disabled:""===G.value||null===G.dateTime||""===G.location||""===G.msg,variant:"contained",color:"primary",children:B?"Update Current Status":"Update Status"}),(0,M.jsx)(u.Z,{onClick:function(){te(),J({value:"",location:"",dateTime:null,msg:"",exceptionalMsg:"",id:""}),B&&Y(!1)},variant:"contained",color:"error",sx:{mr:1},children:"Cancel"})]})]})})})]})}function E(){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(i.ql,{children:(0,M.jsx)("title",{children:"Shipment Tracking"})}),(0,M.jsx)(_,{})]})}U().extend(w())}}]);
//# sourceMappingURL=962.4be30e93.chunk.js.map