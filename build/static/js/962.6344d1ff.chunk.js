"use strict";(self.webpackChunk_tracking_software=self.webpackChunk_tracking_software||[]).push([[962],{94962:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var i=t(6907),r=t(1413),a=t(74165),s=t(15861),l=t(29439),o=t(72791),c=t(57088),d=t(30439),u=t(89164),p=t(4567),h=t(73590),g=t(64554),v=t(61889),x=t(68096),m=t(50168),Z=t(99321),f=t(82626),T=t(27391),D=t(18406),P=t(99615),j=t(52073),O=t(58518),k=t(43513),S=t(71652),b=t(24750),A=t(73936),C=t(97892),w=t.n(C),U=t(83027),M=t.n(U),y=t(80184),I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,height:"auto",p:2};function _(){var e=(0,c.K$)(),n=(0,o.useState)(!1),t=(0,l.Z)(n,2),i=t[0],C=t[1],U=(0,o.useState)([]),M=(0,l.Z)(U,2),_=M[0],E=M[1],W=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem(j._.keyUserToken),t=(0,D.sw)(n),e.next=5,P.ZP.post(P.Hv.shipment.list,{},{headers:{Authorization:"Bearer ".concat(t)}});case 5:(i=e.sent)&&(console.log({response:i}),C(!1),E(i.data.data)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log({err:e.t0}),(0,O.yv)("Failed to fetch jobcards!",{variant:"error"}),C(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){C(!0),W()}),[]);var q=[{name:"#",selector:function(e,n){return n+1},sortable:!0,width:"70px"},{name:"Tracking No.",selector:function(e){return e.trackingNo},sortable:!0,width:"auto"},{name:"Status",selector:function(e){return e.statuses[e.statuses.length-1].value},sortable:!0,center:"true",width:"auto"},{name:"Created On",selector:function(e){return(0,D.p6)(e.createdAt)},sortable:!0,width:"auto"},{name:"Actions",center:"true",width:"auto",cell:function(e){return(0,y.jsx)(d.Z,{color:"info",variant:"outlined",onClick:function(){return Q(e)},children:"Update Status"})}}],Y=(0,o.useState)(!1),B=(0,l.Z)(Y,2),F=B[0],z=B[1],H=(0,o.useState)({id:"",value:"",location:"",dateTime:null,msg:"",exceptionalMsg:""}),L=(0,l.Z)(H,2),N=L[0],K=L[1],R=(0,o.useState)({preShipmentDoc:!1,pickedUp:!1,inTransitOrigin:!1,clearanceAtOriginPort:!1,inTransitOverseas:!1,clearanceAtDestinationPort:!1,inTransitDestination:!1,delivered:!1}),$=(0,l.Z)(R,2),G=$[0],J=$[1],Q=function(e){z(!0);var n=e.statuses[e.statuses.length-1];"Pre Shipment Doc"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!1,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"Picked Up"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!1,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"In Transit Origin"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!1,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"Clearance at Origin Port"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!1,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})):"In Transit Overseas"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!1,inTransitDestination:!0,delivered:!0})})):"Clearance at Destination Port"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!1,delivered:!0})})):"In Transit Destination"===n.value?J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!1})})):"Delivered"===n.value&&J((function(e){return(0,r.Z)((0,r.Z)({},e),{},{preShipmentDoc:!0,pickedUp:!0,inTransitOrigin:!0,clearanceAtOriginPort:!0,inTransitOverseas:!0,clearanceAtDestinationPort:!0,inTransitDestination:!0,delivered:!0})})),K({value:n.value,location:n.location,dateTime:w()(n.dateTime),msg:n.msg,exceptionalMsg:n.exceptionalMsg,id:e._id})},V=function(){z(!1)};return(0,y.jsxs)(u.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,y.jsx)(p.Z,{variant:"h4",children:" Shipment Tracking "}),(0,y.jsx)("div",{style:{marginTop:"20px"},children:(0,y.jsx)(k.ZP,{columns:q,data:_,pagination:!0,progressPending:i})}),(0,y.jsx)(h.Z,{open:F,children:(0,y.jsx)(g.Z,{sx:I,children:(0,y.jsxs)(v.ZP,{container:!0,spacing:1,children:[(0,y.jsx)(v.ZP,{item:!0,xs:12,children:(0,y.jsx)(p.Z,{variant:"h5",gutterBottom:!0,children:"Update Tracking Details"})}),(0,y.jsx)(v.ZP,{item:!0,xs:6,children:(0,y.jsxs)(x.Z,{fullWidth:!0,required:!0,children:[(0,y.jsx)(m.Z,{id:"shipment-status-select",children:"Select Status"}),(0,y.jsxs)(Z.Z,{labelId:"shipment-status-select",id:"demo-simple-select",value:N.value,label:"Select Status",onChange:function(e){K((function(n){return(0,r.Z)((0,r.Z)({},n),{},{value:e.target.value})}))},children:[(0,y.jsx)(f.Z,{disabled:G.preShipmentDoc,value:"Pre Shipment Doc",children:"Pre Shipment Doc"}),(0,y.jsx)(f.Z,{disabled:G.pickedUp,value:"Picked Up",children:"Picked Up"}),(0,y.jsx)(f.Z,{disabled:G.inTransitOrigin,value:"In Transit Origin",children:"In Transit to Origin"}),(0,y.jsx)(f.Z,{disabled:G.clearanceAtOriginPort,value:"Clearance at Origin Port",children:"Clearance at Origin Port"}),(0,y.jsx)(f.Z,{disabled:G.inTransitOverseas,value:"In Transit Overseas",children:"In Transit to Overseas"}),(0,y.jsx)(f.Z,{disabled:G.clearanceAtDestinationPort,value:"Clearance at Destination Port",children:"Clearance at Destination Port"}),(0,y.jsx)(f.Z,{disabled:G.inTransitDestination,value:"In Transit Destination",children:"In Transit Destination"}),(0,y.jsx)(f.Z,{disabled:G.delivered,value:"Delivered",children:"Delivered"})]})]})}),(0,y.jsx)(v.ZP,{item:!0,xs:6,children:(0,y.jsx)(S._,{dateAdapter:b.y,children:(0,y.jsx)(A.x,{label:"Date and Time",value:N.dateTime,onChange:function(e){console.log(e),K((0,r.Z)((0,r.Z)({},N),{},{dateTime:e}))},format:"DD/MM/YYYY hh:mm A",slotProps:{textField:{fullWidth:!0,required:!0}}})})}),(0,y.jsx)(v.ZP,{item:!0,xs:12,children:(0,y.jsx)(T.Z,{multiline:!0,rows:3,label:"Location",placeholder:"Enter Location",value:N.location,onChange:function(e){return K((0,r.Z)((0,r.Z)({},N),{},{location:e.target.value}))},fullWidth:!0,required:!0})}),(0,y.jsx)(v.ZP,{item:!0,xs:6,children:(0,y.jsx)(T.Z,{multiline:!0,rows:2,label:"Message",placeholder:"Enter Message",value:N.msg,onChange:function(e){return K((0,r.Z)((0,r.Z)({},N),{},{msg:e.target.value}))},fullWidth:!0,required:!0})}),(0,y.jsx)(v.ZP,{item:!0,xs:6,children:(0,y.jsx)(T.Z,{multiline:!0,rows:2,label:"Exceptional Message",placeholder:"Enter Exceptional Message",value:N.exceptionalMsg,onChange:function(e){return K((0,r.Z)((0,r.Z)({},N),{},{exceptionalMsg:e.target.value}))},fullWidth:!0})}),(0,y.jsxs)(v.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,y.jsx)(d.Z,{onClick:function(){console.log({trackingDetails:N});var e=localStorage.getItem(j._.keyUserToken),n=(0,D.sw)(e);P.ZP.post(P.Hv.shipment.update,N,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){(0,O.yv)("Shipment updated successfully!",{variant:"success"}),W(),V(),K({value:"",location:"",dateTime:null,msg:"",exceptionalMsg:"",id:""})})).catch((function(e){(0,O.yv)(e.error||e.msg,{variant:"error"})}))},disabled:""===N.value||null===N.dateTime||""===N.location||""===N.msg,variant:"contained",color:"primary",children:"Update Status"}),(0,y.jsx)(d.Z,{onClick:function(){V(),K({value:"",location:"",dateTime:null,msg:"",exceptionalMsg:"",id:""})},variant:"contained",color:"error",sx:{mr:1},children:"Cancel"})]})]})})})]})}function E(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.ql,{children:(0,y.jsx)("title",{children:"Shipment Tracking"})}),(0,y.jsx)(_,{})]})}w().extend(M())}}]);
//# sourceMappingURL=962.6344d1ff.chunk.js.map